<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>spreg.Skater_reg &#8212; spreg v1.8.4.dev8+g8cc5fbc Manual</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=9afac83c" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pysal-styles.css?v=b100b7f1" />
    <script src="../_static/documentation_options.js?v=a961f9ea"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="icon" href="../_static/pysal_favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="spreg.SUR" href="spreg.SUR.html" />
    <link rel="prev" title="spreg.GM_Lag_Endog_Regimes" href="spreg.GM_Lag_Endog_Regimes.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          spreg</a>
        <span class="navbar-text navbar-version pull-left"><b>1.8.4.dev8+g8cc5fbc</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../installation.html">Installation</a></li>
                <li><a href="../tutorials.html">Tutorials</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../references.html">References</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/1_sample_data.html">PySAL Sample Data Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/2_data_input_output.html">Data Input/Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/3_basic_mapping.html">Basic Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/4_spatial_weights.html">Spatial Weights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/5_OLS.html">Basic Ordinary Least Squares Regression (OLS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/6_TWOSLS.html">Two Stage Least Squares Regression (2SLS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/7_spatial_models.html">Spatial Model Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/8_spatial_multipliers.html">Spatial Multipliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/9_specification_tests.html">Specification Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/10_specification_tests_properties.html">Specification Tests - Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/11_distance_decay.html">Distance Decay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/12_estimating_slx.html">Estimating SLX Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/13_ML_estimation_spatial_lag.html">Maximum Likelihood Estimation - Spatial Lag Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/14_IV_estimation_spatial_lag.html">Instrumental Variables Estimation - Spatial Lag Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/15_ML_estimation_spatial_error.html">Maximum Likelihood Estimation - Spatial Error Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/16_GMM_estimation_spatial_error.html">GMM Estimation - Spatial Error Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/17_GMM_higher_order.html">GMM Estimation - Higher Order Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/Panel_FE_example.html">Spatial Panel Models with Fixed Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/skater_reg.html">Skater Regression</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api.html#classic-models">Classic Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#spatial-regression-models">Spatial Regression Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#discrete-choice-models">Discrete Choice Models</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#regimes-models">Regimes Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#seemingly-unrelated-regressions">Seemingly-Unrelated Regressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#spatial-panel-models">Spatial Panel Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#diagnostics">Diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#spatial-specification-search">Spatial Specification Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#dgp">DGP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">spreg.Skater_reg</a><ul>
<li><a class="reference internal" href="#spreg.Skater_reg"><code class="docutils literal notranslate"><span class="pre">Skater_reg</span></code></a><ul>
<li><a class="reference internal" href="#spreg.Skater_reg.__init__"><code class="docutils literal notranslate"><span class="pre">Skater_reg.__init__()</span></code></a></li>
<li><a class="reference internal" href="#spreg.Skater_reg.find_cut"><code class="docutils literal notranslate"><span class="pre">Skater_reg.find_cut()</span></code></a></li>
<li><a class="reference internal" href="#spreg.Skater_reg.fit"><code class="docutils literal notranslate"><span class="pre">Skater_reg.fit()</span></code></a></li>
<li><a class="reference internal" href="#spreg.Skater_reg.score_spreg"><code class="docutils literal notranslate"><span class="pre">Skater_reg.score_spreg()</span></code></a></li>
<li><a class="reference internal" href="#spreg.Skater_reg.score_stats"><code class="docutils literal notranslate"><span class="pre">Skater_reg.score_stats()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="spreg-skater-reg">
<h1>spreg.Skater_reg<a class="headerlink" href="#spreg-skater-reg" title="Link to this heading">Â¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="spreg.Skater_reg">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spreg.</span></span><span class="sig-name descname"><span class="pre">Skater_reg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dissimilarity=&lt;function</span> <span class="pre">euclidean_distances&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affinity=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reduction=&lt;function</span> <span class="pre">sum&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center=&lt;function</span> <span class="pre">mean&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spreg/skater_reg.html#Skater_reg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spreg.Skater_reg" title="Link to this definition">Â¶</a></dt>
<dd><p>Initialize the Skater_reg algorithm based on <span id="id1">[<a class="reference internal" href="../references.html#id7" title="Luc Anselin and Pedro Amaral. Endogenous spatial regimes. Journal of Geographical Systems, (26):209â234, 2024. URL: https://doi.org/10.1007/s10109-023-00411-2.">AA24</a>]</span>.
The function can currently estimate OLS, from
spreg or stats_models, and Spatial Lag models from spreg.
Fit method performs estimation and returns a Skater_reg object.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>dissimilarity</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">a</span></code> <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">distance</span></code> metric.</span></dt><dd><p>Default: sklearn.metrics.pairwise.euclidean_distances</p>
</dd>
<dt><strong>affinity</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">a</span></code> <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">callable()</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">affinity</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">metric</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">between</span></code> 0,1.</span></dt><dd><p>Will be inverted to provide a
dissimilarity metric.</p>
</dd>
<dt><strong>reduction</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">the</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">reduction</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">applied</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">over</span></code> <a class="reference external" href="https://docs.python.org/3/library/functions.html#all" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">all</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">clusters</span></code></span></dt><dd><p>to provide the map score.
Default: numpy.sum</p>
</dd>
<dt><strong>center</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">way</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">to</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">compute</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">the</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">center</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">each</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">region</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">in</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">attribute</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">space</span></code></span></dt><dd><p>Default: numpy.mean</p>
</dd>
<dt><strong>NOTE: Optimization occurs with respect to a *dissimilarity* metric, so the reduction should</strong></dt><dd><p>yield some kind of score where larger values are <em>less desirable</em> than smaller values.
Typically, this means we use addition.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>coords</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.3)"><span>array_like</span></a></span></dt><dd><p>n*2, collection of n sets of (x,y) coordinates used for
calibration locations</p>
</dd>
<dt><strong>y</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array</span></code></a></span></dt><dd><p>n*1, dependent variable</p>
</dd>
<dt><strong>X</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array</span></code></a></span></dt><dd><p>n*k, independent variable, not including the constant</p>
</dd>
<dt><strong>bw</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#arrays-scalars" title="(in NumPy v2.3)"><span class="xref std std-ref">scalar</span></a></span></dt><dd><p>bandwidth value consisting of either a distance or N
nearest neighbors; user specified or obtained using
Sel_BW</p>
</dd>
<dt><strong>family</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">family</span></code> <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a></span></dt><dd><p>underlying probability model; provides
distribution-specific calculations</p>
</dd>
<dt><strong>offset</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array</span></code></a></span></dt><dd><p>n*1, the offset variable at the ith location. For Poisson model
this term is often the size of the population at risk or
the expected size of the outcome in spatial epidemiology
Default is None where Ni becomes 1.0 for all locations</p>
</dd>
<dt><strong>sigma2_v1</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.13)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>specify form of corrected denominator of sigma squared to use for
model diagnostics; Acceptable options are:
âTrueâ:       n-tr(S) (defualt)
âFalseâ:     n-2(tr(S)+tr(SâS))</p>
</dd>
<dt><strong>kernel</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a></span></dt><dd><p>type of kernel function used to weight observations;
available options:
âgaussianâ
âbisquareâ
âexponentialâ</p>
</dd>
<dt><strong>fixed</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.13)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>True for distance based kernel function and  False for
adaptive (nearest neighbor) kernel function (default)</p>
</dd>
<dt><strong>constant</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.13)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>True to include intercept (default) in model and False to exclude
intercept</p>
</dd>
<dt><strong>spherical</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.13)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>True for shperical coordinates (long-lat),
False for projected coordinates (defalut).</p>
</dd>
<dt><strong>hat_matrix</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.13)"><span class="xref std std-ref">bool</span></a></span></dt><dd><p>True to store full n by n hat matrix,
False to not store full hat matrix to minimize memory footprint (defalut).</p>
</dd>
<dt><strong>n</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">integer</span></code></span></dt><dd><p>number of observations</p>
</dd>
<dt><strong>k</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">integer</span></code></span></dt><dd><p>number of independent variables</p>
</dd>
<dt><strong>mean_y</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>mean of y</p>
</dd>
<dt><strong>std_y</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">float</span></code></a></span></dt><dd><p>standard deviation of y</p>
</dd>
<dt><strong>fit_params</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">dict</span></code></a></span></dt><dd><p>parameters passed into fit method to define estimation
routine</p>
</dd>
<dt><strong>points</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.3)"><span>array_like</span></a></span></dt><dd><p>n*2, collection of n sets of (x,y) coordinates used for
calibration locations instead of all observations;
defaults to None unles specified in predict method</p>
</dd>
<dt><strong>P</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array</span></code></a></span></dt><dd><p>n*k, independent variables used to make prediction;
exlcuding the constant; default to None unless specified
in predict method</p>
</dd>
<dt><strong>exog_scale</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#arrays-scalars" title="(in NumPy v2.3)"><span class="xref std std-ref">scalar</span></a></span></dt><dd><p>estimated scale using sampled locations; defualt is None
unless specified in predict method</p>
</dd>
<dt><strong>exog_resid</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-array_like" title="(in NumPy v2.3)"><span>array_like</span></a></span></dt><dd><p>estimated residuals using sampled locations; defualt is None
unless specified in predict method</p>
</dd>
<dt><strong>Examples</strong></dt><dd></dd>
<dt><strong>âââ</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; import libpysal as ps</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; import numpy as np</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; import spreg</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; from spreg.skater_reg import Skater_reg</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; data = ps.io.open(ps.examples.get_path(âcolumbus.dbfâ))</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; y = np.array(data.by_col(âHOVALâ)).reshape((-1,1))</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; x_var = [âINCâ,âCRIMEâ]</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; x = np.array([db.by_col(name) for name in x_var]).T</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; w = ps.weights.Queen.from_shapefile(ps.examples.get_path(âcolumbus.shpâ))</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; x_std = (x - np.mean(x,axis=0)) / np.std(x,axis=0)</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; results = Skater_reg().fit(3, w, x_std, {âregâ:spreg.OLS,âyâ:y,âxâ:x}, quorum=10, trace=False)</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; results.current_labels_</strong></dt><dd></dd>
<dt><strong>array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0,</strong></dt><dd><p>0, 1, 0, 0, 2, 2, 0, 0, 1, 0, 2, 1, 2, 1, 2, 0, 1, 0, 0, 1, 2, 2,
2, 1, 0, 2, 2], dtype=int32)</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="spreg.Skater_reg.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dissimilarity=&lt;function</span> <span class="pre">euclidean_distances&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affinity=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reduction=&lt;function</span> <span class="pre">sum&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center=&lt;function</span> <span class="pre">mean&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spreg/skater_reg.html#Skater_reg.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spreg.Skater_reg.__init__" title="Link to this definition">Â¶</a></dt>
<dd></dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#spreg.Skater_reg.__init__" title="spreg.Skater_reg.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>([dissimilarity,Â affinity,Â ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spreg.Skater_reg.find_cut" title="spreg.Skater_reg.find_cut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_cut</span></code></a>(MSF[,Â data,Â data_reg,Â ...])</p></td>
<td><p>Find the best cut from the MSF.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spreg.Skater_reg.fit" title="spreg.Skater_reg.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>(n_clusters,Â W[,Â data,Â data_reg,Â quorum,Â ...])</p></td>
<td><p>Method that fits a model with a particular estimation routine.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#spreg.Skater_reg.score_spreg" title="spreg.Skater_reg.score_spreg"><code class="xref py py-obj docutils literal notranslate"><span class="pre">score_spreg</span></code></a>([data,Â data_reg,Â all_labels,Â ...])</p></td>
<td><p>This yields a score for the data using methods from the spreg library, given the labels provided.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#spreg.Skater_reg.score_stats" title="spreg.Skater_reg.score_stats"><code class="xref py py-obj docutils literal notranslate"><span class="pre">score_stats</span></code></a>([data,Â data_reg,Â all_labels,Â ...])</p></td>
<td><p>This yields a score for the data using methods from the stats_models library, given the labels provided.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="spreg.Skater_reg.find_cut">
<span class="sig-name descname"><span class="pre">find_cut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">MSF</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_reg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_n_subtrees</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quorum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trees_scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_family</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'spreg'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spreg/skater_reg.html#Skater_reg.find_cut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spreg.Skater_reg.find_cut" title="Link to this definition">Â¶</a></dt>
<dd><p>Find the best cut from the MSF.</p>
<dl class="simple">
<dt>MSF: (N,N) scipy sparse matrix with zero elements removed.</dt><dd><p>Represents the adjacency matrix for the minimum spanning forest.
Constructed from sparse.csgraph.sparse_from_dense or using MSF.eliminate_zeros().
You MUST remove zero entries for this to work, otherwise they are considered no-cost paths.</p>
</dd>
</dl>
<p>data: (N,p) attribute matrix. If not provided, replaced with (N,1) vector of ones.
data_reg: optional list containing:</p>
<blockquote>
<div><p>1- a callable spreg or statsmodels regression method (ex. OLS or GM_Lag)
2- np.ndarray of (N,1) shape with N observations on the depedent variable for the regression
3- np.ndarray of (N,k) shape with N observations and k columns containing the explanatory variables (constant must not be included)
4- pysal W object to be used in the regression (optional)</p>
</div></blockquote>
<p>current_n_subtrees: integer indication the current number of subtrees.
current_labels: (N,) flat vector of labels expressing the classification of each observation into a region not considering the cut under evaluation.
quorum: int denoting the minimum number of elements in the region
trees_scores: dictionary indicating subtressâs labels and their respective current score.
labels: (N,) flat vector of labels for each point. Represents the âcluster labelsâ</p>
<blockquote>
<div><p>for disconnected components of the graph.</p>
</div></blockquote>
<dl class="simple">
<dt>target_label: int from the labels array to subset the MSF. If passed along with <cite>labels</cite>, then a cut</dt><dd><p>will be found that is restricted to that subset of the MSF.</p>
</dd>
</dl>
<p>make: bool, whether or not to modify the input MSF in order to make the best cut that was found.
verbose: bool/int, denoting how much output to provide to the user, in terms</p>
<blockquote>
<div><p>of print statements or progressbars</p>
</div></blockquote>
<p>Returns a namedtuple with in_node, out_node, and score.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spreg.Skater_reg.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_clusters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">W</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_reg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quorum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">islands</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'increase'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_family</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'spreg'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spreg/skater_reg.html#Skater_reg.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spreg.Skater_reg.fit" title="Link to this definition">Â¶</a></dt>
<dd><p>Method that fits a model with a particular estimation routine.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>n_clusters</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">clusters</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">wanted</span></code></span></dt><dd></dd>
<dt><strong>W</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysal</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">W</span></code> <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">expressing</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">the</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">neighbor</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">relationships</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">between</span></code> observations.</span></dt><dd><p>Should be symmetric and binary, so Queen/Rook, DistanceBand, or a symmetrized KNN.</p>
</dd>
<dt><strong>data</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">np.ndarray</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> (N,P) <code class="xref py py-obj docutils literal notranslate"><span class="pre">shape</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">with</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">N</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">observations</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">and</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">P</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">features</span></code></span></dt><dd><p>This is the data that is used to evaluate the similarity between each observation.</p>
</dd>
<dt><strong>data_reg</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">list</span></code></a> containing:</span></dt><dd><p>1- a callable regression method (ex. OLS or GM_Lag from spreg or OLS from statsmodels)
2- np.ndarray of (N,1) shape with N observations on the depedent variable for the regression
3- np.ndarray of (N,k) shape with N observations and k columns containing the explanatory variables (constant must not be included)
4- pysal W object to be used in the regression (optional)</p>
</dd>
<dt><strong>quorum</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">with</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">minimum</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">size</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">each</span></code> region.</span></dt><dd></dd>
<dt><strong>trace</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.13)"><span class="xref std std-ref">bool</span></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">denoting</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">whether</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">to</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">store</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">intermediate</span></code></span></dt><dd><p>labelings as the tree gets pruned</p>
</dd>
<dt><strong>islands</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">describing</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">what</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">to</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">do</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">with</span></code> islands.</span></dt><dd><p>If âignoreâ, will discover <cite>n_clusters</cite> regions, treating islands as their own regions.
If âincreaseâ, will discover <cite>n_clusters</cite> regions, treating islands as separate from n_clusters.</p>
</dd>
<dt><strong>verbose</strong><span class="classifier">bool/int <code class="xref py py-obj docutils literal notranslate"><span class="pre">describing</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">how</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">much</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">output</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">to</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">provide</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">to</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">the</span></code> user,</span></dt><dd><p>in terms of print statements or progressbars.</p>
</dd>
<dt><strong>model_family</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">str</span></code></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">describing</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">the</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">fFamily</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">of</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">estimation</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">method</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">used</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">for</span></code> <code class="xref py py-obj docutils literal notranslate"><span class="pre">the</span></code> regression.</span></dt><dd><p>Must be either âspregâ (default) or âstatsmodelsâ</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: <a class="reference internal" href="#spreg.Skater_reg" title="spreg.Skater_reg"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Skater_reg</span></code></a> object.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spreg.Skater_reg.score_spreg">
<span class="sig-name descname"><span class="pre">score_spreg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_reg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quorum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_tree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spreg/skater_reg.html#Skater_reg.score_spreg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spreg.Skater_reg.score_spreg" title="Link to this definition">Â¶</a></dt>
<dd><p>This yields a score for the data using methods from the spreg library, given the labels provided. If no labels are provided,
and the object has been fit, then the labels discovered from the previous fit are used.</p>
<p>If a quorum is not passed, it is assumed to be irrelevant.</p>
<p>If a quorum is passed and the labels do not meet quorum, the score is inf.</p>
<p>data        :   (N,P) array of data on which to compute the score of the regions expressed in labels
data_reg    :   dict containing:</p>
<blockquote>
<div><ul class="simple">
<li><p>âregâ: callable spreg regression method (e.g., OLS or GM_Lag)</p></li>
<li><p>âyâ: (N,1) np.ndarray with dependent variable</p></li>
<li><p>âxâ: (N,k) np.ndarray with explanatory variables (excluding constant)</p></li>
<li><p>âwâ: (optional) pysal W object for spatial weights</p></li>
<li><p>âyendâ, âqâ: (optional) np.ndarrays for instrumental variables</p></li>
</ul>
</div></blockquote>
<p>all_labels  :   (N,) flat vector of labels expressing the classification of each observation into a region considering the cut under evaluation.
quorum      :   int expressing the minimum size of regions. Can be -inf if there is no lower bound.</p>
<blockquote>
<div><p>Any region below quorum makes the score inf.</p>
</div></blockquote>
<p>current_labels: (N,) flat vector of labels expressing the classification of each observation into a region not considering the cut under evaluation.
current_tree: integer indicating the treeâs label currently being considered for division</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spreg.Skater_reg.score_stats">
<span class="sig-name descname"><span class="pre">score_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_reg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quorum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_tree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spreg/skater_reg.html#Skater_reg.score_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spreg.Skater_reg.score_stats" title="Link to this definition">Â¶</a></dt>
<dd><p>This yields a score for the data using methods from the stats_models library, given the labels provided. If no labels are provided,
and the object has been fit, then the labels discovered from the previous fit are used.</p>
<p>If a quorum is not passed, it is assumed to be irrelevant.</p>
<p>If a quorum is passed and the labels do not meet quorum, the score is inf.</p>
<p>data        :   (N,P) array of data on which to compute the score of the regions expressed in labels
data_reg    :   list containing:</p>
<blockquote>
<div><p>1- a callable statsmodels regression method (ex. OLS)
2- np.ndarray of (N,1) shape with N observations on the depedent variable for the regression
3- np.ndarray of (N,k) shape with N observations and k columns containing the explanatory variables (constant must not be included)
4- pysal W object to be used in the regression (optional)</p>
</div></blockquote>
<p>all_labels  :   (N,) flat vector of labels expressing the classification of each observation into a region considering the cut under evaluation.
quorum      :   int expressing the minimum size of regions. Can be -inf if there is no lower bound.</p>
<blockquote>
<div><p>Any region below quorum makes the score inf.</p>
</div></blockquote>
<p>current_labels: (N,) flat vector of labels expressing the classification of each observation into a region not considering the cut under evaluation.</p>
<p>current_tree: integer indicating the tree label is currently being considered for division</p>
<dl class="simple">
<dt>NOTE: Optimization occurs with respect to a <em>dissimilarity</em> metric, so the problem <em>minimizes</em></dt><dd><p>the map dissimilarity. So, lower scores are better.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/generated/spreg.Skater_reg.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2018-, pysal developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>